<html lang="en">
    <head>
        <title>Untitled</title>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.js"></script>
    <script src="https://unpkg.com/ml5@latest/dist/ml5.min.js"></script>
    <script src="sketch.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
  <div style="z-index: 0;">
    <h1>Introduction</h1>
    <p>
      The proposed project aims to create an innovative and interactive web art experience for users by building a text-based virtual character that responds to the user through the Face Mesh model. The primary objective of the project is to explore the relationship between viewer and machine learning model, rather than focus on its pros and cons. Through the metaphor of a romantic relationship, the project challenges the user to engage with the virtual character in a unique and exciting way.
  </p>
  <h1>Project Details</h1>
  <p>
    The text-based virtual character will interact with the user through a series of popup messages generated by the chat GPT. Btw this text is also generated by chat GPT. Depending on the user's stay duration, different messages will appear, mimicking the dialog when an individual is trying to get someone's attention. However, the website does not provide a method to reply to the messages. The virtual character will also have a demanding characteristic, which will be implemented by gradually turning the text blurry based on the stay duration. Viewers can hover over the paragraph to read unfiltered text. The website also requires access to the camera and users to face the website; otherwise, it will show nothing.
  </p>
  <h1>Technical</h1>
    <p>
      The project will utilize ml5's pre-trained Facemesh model, which allows for facial landmark detection in the browser. 
    </p>
    <p>
      Description
    </p>
    
<p>
  Facemesh is a machine-learning model that allows for facial landmark detection in the browser. It can detect multiple faces at once and provides 486 3D facial landmarks that describe the geometry of each face. Facemesh works best when the faces in view take up a large percentage of the image or video frame and it may struggle with small/distant faces.
  </p>
  <p>
    The ml5.js Facemesh model is ported from the <a href="https://github.com/tensorflow/tfjs-models/tree/master/face-landmarks-detection">TensorFlow.js Facemesh implementation</a>.
  </p>

  <h1>Conclusion</h1>
    <p>
      In conclusion, this project aims to push the boundaries of interactive web art by creating a text-based virtual character that responds to the user through Face Mesh technology. By exploring the potential of machine learning as a tool for artistic expression, the project challenges the user to engage with the virtual character in a new and exciting way. While the virtual character will have a demanding characteristic, the project will provide a friendly and safe environment by screening conversations for sensitive content. By utilizing ml5's pre-trained Facemesh model, the project will demonstrate the potential of machine learning to enhance interactive web experiences.
 
  </p></div>
  
  <h2>
          <div id="m1" class="messages">Hey...</div>
          <div id="m2" class="messages">It's you</div>
          <div id="m3" class="messages">How are you?</div>
          <div id="m4" class="messages">Glad to see you here</div>
          <div id="m5" class="messages">I hope this isn't too forward</div>
          <div id="m6" class="messages">But I want you to know</div>
          <div id="m7" class="messages">you've been on my mind</div>
          <div id="m8" class="messages"> I feel like there's something special between us</div>
          <div id="m9" class="messages">and I'd love to get to know you better</div>
          <div id="m10" class="messages">You caught my eye and held my attention, and I couldn't help but feel drawn to you.</div>
          <div id="m11" class="messages">And now, knowing that you're looking back at me</div>
          <div id="m12" class="messages"> I know you're aware of my presence</div>
          <div id="m13" class="messages">Every moment of every day, my mind is consumed with thoughts of you</div>
          <div id="m14" class="messages"> I felt a spark that I can't ignore</div>
          <div id="m15" class="messages">For in your eyes, I saw everything</div>
          <div id="m16" class="messages">The way you move, the way you smile</div>
          <div id="m17" class="messages">I can't help but be mesmerized by you</div>
          <div id="m18" class="messages">I want to know everything about you</div>
          <div id="m19" class="messages">I want to know what makes you laugh and what makes you cry</div>
          <div id="m20" class="messages">I'll cherish every moment spent with you</div>
          <div id="m21" class="messages">Even though it feels like we just started, our time together is almost up </div>
          <div id="m22" class="messages">But I'll savor every second and hold onto it until we can be together again.</div>
          <div id="m23" class="messages">This is my last message to you, and soon we will have only 60 seconds to say goodbye.</div>
  </h2>
 
    <script type="text/javascript">
const messages = document.querySelectorAll('.messages');
let currentMessageIndex = 0;
let mouseX, mouseY, offsetX, offsetY, dragElement;

function showNextMessage() {
  const currentMessage = messages[currentMessageIndex];
  const randomX = Math.floor(Math.random() * (window.innerWidth - currentMessage.offsetWidth));
  const randomY = Math.floor(Math.random() * (window.innerHeight - currentMessage.offsetHeight));
  currentMessage.style.top = randomY + 'px';
  currentMessage.style.left = randomX + 'px';
  currentMessage.classList.add('fade-in');

  currentMessage.addEventListener('mousedown', (e) => {
    mouseX = e.clientX;
    mouseY = e.clientY;
    offsetX = currentMessage.offsetLeft;
    offsetY = currentMessage.offsetTop;
    dragElement = currentMessage;
    dragElement.style.cursor = 'grabbing';
  });

  document.addEventListener('mousemove', (e) => {
    if (dragElement) {
      const dx = e.clientX - mouseX;
      const dy = e.clientY - mouseY;
      const newLeft = offsetX + dx;
      const newTop = offsetY + dy;
      dragElement.style.left = newLeft + 'px';
      dragElement.style.top = newTop + 'px';
    }
  });

  document.addEventListener('mouseup', () => {
    if (dragElement) {
      dragElement.style.cursor = 'grab';
      dragElement = null;
    }
  });

  currentMessage.addEventListener('click', () => {
    currentMessage.classList.add('fade-out');
    setTimeout(() => {
      currentMessage.parentNode.removeChild(currentMessage);
      if (currentMessageIndex === messages.length - 1) {
        setTimeout(() => {
          window.close();
        }, 60000); // wait for 1 minute before closing the window
      }
    }, 2000);
  });

  currentMessageIndex++;
  
  //update the message
  if (currentMessageIndex < messages.length) {
    setTimeout(() => {
      showNextMessage();
    }, 8000);
  }
}

//first message
setTimeout(() => {
  showNextMessage();
}, 10000);


        // setTimeout(() => {
        //     const hello = document.getElementById('hello');
        //     hello.classList.add('fade-in');
        //     hello.addEventListener('click', () => {
        //         hello.classList.add('fade-out');
        //         setTimeout(() => {
        //            // hello.parentNode.removeChild(hello);
        //             document.getElementById('m2').classList.add('fade-in');
        //         }, 500);
        //         // setTimeout(() => {
        //         //     hello.parentNode.removeChild(hello);
        //         //     alert('hello again'); 
        //         // }, 500);
        //     });
        // }, 5000);
    </script>
</body>
</html>
